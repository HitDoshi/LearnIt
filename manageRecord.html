<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IndexedDB Data Management</title>

    <!-- Add your stylesheet -->
    <link rel="stylesheet" href="./styles/navBar.style.css" />
    <link rel="stylesheet" href="./styles/table.style.css" />
    <link rel="stylesheet" href="./styles/toast.style.css" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <style></style>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top" id="myNavbar">
      <a class="navbar-brand" style="color: black;">LearnIt</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#"
              >Home <span class="sr-only">(current)</span></a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="matchPair.html">Match Pair</a>
          </li>
          <!-- <div class="icon update-icon" onclick="updateData();">✓</div>
          <div
            class="icon update-icon"
            style="margin-right: 20px"
            onclick="undoData();"
          >
            ↺
          </div> -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="navbarDropdownMenuLink"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
              style="color: brown; font-weight: 500;"            
            >
              Manage Record
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="manageRecord.html?id=1"
                >Show All</a
              >
              <a class="dropdown-item" href="manageRecord.html?id=2"
                >Show Fav Only</a
              >
              <a class="dropdown-item" href="manageRecord.html?id=3"
                >Show Skip Only</a
              >
            </div>
          </li>
          <div class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-1" id="searchInput" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0 mr-sm-1" onclick="search();">Search</button>
          </div>
          <button class="btn btn-success mr-sm-1 my-1 my-sm-0 btn-sm icon update-icon" 
          onclick="updateData();">Update</button>
          <button class="btn btn-danger my-2 my-sm-0 icon update-icon"  onclick="undoData();">Cancle</button>
        </ul>
      </div>
    </nav>
     

    <!-- Navigation bar with hamburger icon -->
    <!-- <div class="navbar">
      <div class="web-name">DB Driven Web</div>
      <div class="icon update-icon" onclick="updateData();">✓</div>
      <div
        class="icon update-icon"
        style="margin-right: 20px"
        onclick="undoData();"
      >
        ↺
      </div>
      <div class="icon" id="toggleIcon" onclick="toggleFilterSheet()">☰</div>
      <div class="filter-sheet" id="filterSheet">
        <div class="filter-options">
          <div
            class="filter-option option1"
            id="1"
            onclick="selectOption('option1'); undoData(); displayData();"
            href="/matchPair.html"
          >
            Show All
          </div>
          <div
            class="filter-option option2"
            id="2"
            onclick="selectOption('option2'); undoData(); displayFavData();"
          >
            Show Fav Only
          </div>
          <div
            class="filter-option option3"
            id="3"
            onclick="selectOption('option3'); undoData(); displaySkipData();"
          >
            Show Skip Only
          </div>
          
        </div>
      </div>
    </div> -->

    <table
      id="dataTable"
      style="max-width: 90%; margin: auto; margin-top: 80px"
    >
      <thead>
        <tr>
          <th style="width: fit-content; text-align: center">ID</th>
          <th style="width: max-content; text-align: center">Value 1</th>
          <th style="width: max-content; text-align: center">Value 2</th>
          <th style="width: fit-content; text-align: center">Fav</th>
          <th style="width: fit-content; text-align: center">Skip</th>
          <th style="width: fit-content; text-align: center">Delete</th>
        </tr>
      </thead>
      <tbody>
        <!-- Data will be populated here -->
      </tbody>
    </table>

    <div class="toast-container" id="toastContainer"></div>

    <script>
      let isFilterSheetOpen = false;

      // Function to toggle the filter sheet and change the icon
      function toggleFilterSheet() {
        const sheet = document.getElementById("filterSheet");
        const icon = document.getElementById("toggleIcon");

        if (isFilterSheetOpen) {
          sheet.style.display = "none";
          icon.textContent = "☰"; // Change to hamburger icon
        } else {
          sheet.style.display = "block";
          icon.textContent = "✕"; // Change to cross icon
        }

        isFilterSheetOpen = !isFilterSheetOpen;
      }

      // Function to select an option and change background color
      function selectOption(option) {
        // Reset background color for all options
        const options = document.querySelectorAll(".filter-option");
        options.forEach((opt) => {
          opt.classList.remove("selected");
        });

        // Set background color for the selected option
        const selectedOption = document.querySelector(`.${option}`);
        selectedOption.classList.add("selected");

        // Close the filter sheet
        const filterSheet = document.getElementById("filterSheet");
        filterSheet.style.display = "none";

        // Change the icon back to the hamburger icon
        const icon = document.getElementById("toggleIcon");
        icon.textContent = "☰";

        isFilterSheetOpen = false;

        // Add logic here to handle the selected option
        console.log("Selected Option:", option);
      }


      // // Add a click event listener to the window
      // window.addEventListener("click", function (event) {
      //   const filterSheet = document.getElementById("filterSheet");
      //   const toggleIcon = document.getElementById("toggleIcon");

      //   // Check if the click target is outside the filter-sheet and toggle icon
      //   if (
      //     !filterSheet.contains(event.target) &&
      //     !toggleIcon.contains(event.target)
      //   ) {
      //     filterSheet.style.display = "none"; // Hide the filter-sheet
      //     toggleIcon.textContent = "☰";
      //     isFilterSheetOpen = false;
      //   }
      // });
    </script>

    <script src="./src/manageRecord.js"></script>
    <script src="./src/displayToast.js"></script>
  </body>
</html>
