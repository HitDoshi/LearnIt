<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IndexedDB Data Management</title>

  <!-- Add your stylesheet -->
  <link rel="stylesheet" href="./styles/navBar.style.css" />
  <link rel="stylesheet" href="./styles/table.style.css" />
  <link rel="stylesheet" href="./styles/toast.style.css" />
  <link rel="stylesheet" href="./styles/manageRecord.style.css" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <style>
    /* Hide the arrow in the dropdown trigger */
  .no-arrow-dropdown-toggle::after {
    display: none;
  }

    /* Rest of the CSS remains the same */
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top" id="window-navbar">
    <a class="navbar-brand" style="color: black;">LearnIt</a>    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
      aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item active">
          <a class="nav-link" onclick="replaceStateWithHistory('home.html');">Home</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" onclick="replaceStateWithHistory('test.html');" id="test">Practice</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" onclick="replaceStateWithHistory('matchPair.html');">Match Pair</a>
        </li>
        <!-- <div class="icon update-icon" onclick="updateData();">✓</div>
          <div
            class="icon update-icon"
            style="margin-right: 20px"
            onclick="undoData();"
          >
            ↺
          </div> -->          
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false" style="color: brown; font-weight: 500;">
            Manage Record
          </a>          
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" onclick="replaceStateWithHistory('manageRecord.html?id=2');">Show All</a>
            <a class="dropdown-item" onclick="replaceStateWithHistory('manageRecord.html?id=2');">Show Fav Only</a>
            <a class="dropdown-item" onclick="replaceStateWithHistory('manageRecord.html?id=3');">Show Skip Only</a>
          </div>
        </li>
        <li class="nav-item" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter" style="cursor: pointer;">
          <a class="nav-link">Add Data</a>
        </li>
        <!-- <div class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-1" id="searchInput" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0 mr-sm-1" onclick="search();">Search</button>
          </div> -->
        <button class="btn btn-success mr-sm-1 my-1 my-sm-0 btn-sm icon update-icon"
          onclick="updateData();">Update</button>
        <button class="btn btn-danger my-2 my-sm-0 icon update-icon" onclick="undoData();">Cancle</button>
      </ul>
    </div>
  </nav>

  <nav id="mobile-navbar" class="navbar navbar-expand-lg navbar-light bg-light">
    <div style="display: flex;width: 100%;">
  
      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="black" class="bi bi-arrow-left-short" style="align-self: center;margin-right: 5px;" id="backButton"
        viewBox="0 0 16 16">
        <path fill-rule="evenodd"
          d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z" />
      </svg>
  
      <a class="navbar-brand" style="color: black;align-self: center;font-size: 20px;">LearnIt</a>

      <div class="ml-auto" style="display: flex; align-items: center;">
        <div style="margin-left: auto;align-self: center;display: flex;align-items: center;justify-content: center;">

          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="black" class="bi bi-reply update-icon" viewBox="0 0 16 16" style="align-self: center;margin-right: 10px;" onclick="undoData();">
            <path d="M6.598 5.013a.144.144 0 0 1 .202.134V6.3a.5.5 0 0 0 .5.5c.667 0 2.013.005 3.3.822.984.624 1.99 1.76 2.595 3.876-1.02-.983-2.185-1.516-3.205-1.799a8.74 8.74 0 0 0-1.921-.306 7.404 7.404 0 0 0-.798.008h-.013l-.005.001h-.001L7.3 9.9l-.05-.498a.5.5 0 0 0-.45.498v1.153c0 .108-.11.176-.202.134L2.614 8.254a.503.503 0 0 0-.042-.028.147.147 0 0 1 0-.252.499.499 0 0 0 .042-.028l3.984-2.933zM7.8 10.386c.068 0 .143.003.223.006.434.02 1.034.086 1.7.271 1.326.368 2.896 1.202 3.94 3.08a.5.5 0 0 0 .933-.305c-.464-3.71-1.886-5.662-3.46-6.66-1.245-.79-2.527-.942-3.336-.971v-.66a1.144 1.144 0 0 0-1.767-.96l-3.994 2.94a1.147 1.147 0 0 0 0 1.946l3.994 2.94a1.144 1.144 0 0 0 1.767-.96v-.667z"/>
          </svg>
  
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="black" class="bi bi-check2 update-icon" viewBox="0 0 16 16" style="align-self: center;margin-right: 10px;" onclick="updateData();">
            <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
          </svg>
    
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="black" class="bi bi-plus-lg" data-toggle="modal" data-target="#exampleModalCenter"      
            viewBox="0 0 16 16" style="margin-right: 12px;">
            <path fill-rule="evenodd"
              d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z" />
          </svg>
          
          <div class="dropdown">
            <span class="dropdown-toggle no-arrow-dropdown-toggle" id="menu-button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="black" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
                <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path>
              </svg>
            </span>
            <div class="dropdown-menu dropdown-menu-right">
              <label class="dropdown-item">
                <input type="radio" name="recordOption" value="Show All" onclick="replaceStateWithHistory('manageRecord.html?id=1');" id="showAllRadio"> Show All
              </label>
              <label class="dropdown-item">
                <input type="radio" name="recordOption" value="Show Fav Only" onclick="replaceStateWithHistory('manageRecord.html?id=2');" id="favOnlyRadio"> Show Fav Only
              </label>
              <label class="dropdown-item">
                <input type="radio" name="recordOption" value="Show Skip Only" onclick="replaceStateWithHistory('manageRecord.html?id=3');" id="skipOnlyRadio"> Show Skip Only
              </label>
            </div>        
          </div>      
          
    
        </div>   
      </div>

      
    </div>
    </nav>
  

  <div class="toast-container" id="toastContainer"></div>
  <div id="snackbar"></div>

  <!-- Modal -->
  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Add data</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

          <form id="addData-Form">
            <div class="form-group">
              <label for="value1">Value1</label>
              <input type="text" class="form-control" id="value1" placeholder="Value 1" value="" required>
            </div>
            <div class="form-group">
              <label for="value2">Value2</label>
              <input type="text" class="form-control" id="value2" placeholder="Value 2" value="" required>
            </div>
            <div class="form-group">
              <label for="value3">Value3</label>
              <input type="text" class="form-control" id="value3" placeholder="Value 3" value="">
            </div>            

            <div class="form-row d-flex justify-content-around align-items-center">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="favourite">
                <label class="form-check-label" for="favourite">
                  Favourite
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="skip">
                <label class="form-check-label" for="skip">
                  Skip
                </label>
              </div>
            </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal" id="cancelButton">CANCLE</button>
          <button class="btn btn-primary" style="width: 50%;" type="submit" id="submitButton">ADD</button>
        </div>
        </form>

      </div>
    </div>
  </div>

  

  <!-- Navigation bar with hamburger icon -->
  <!-- <div class="navbar">
      <div class="web-name">DB Driven Web</div>
      <div class="icon update-icon" onclick="updateData();">✓</div>
      <div
        class="icon update-icon"
        style="margin-right: 20px"
        onclick="undoData();"
      >
        ↺
      </div>
      <div class="icon" id="toggleIcon" onclick="toggleFilterSheet()">☰</div>
      <div class="filter-sheet" id="filterSheet">
        <div class="filter-options">
          <div
            class="filter-option option1"
            id="1"
            onclick="selectOption('option1'); undoData(); displayData();"
            href="/matchPair.html"
          >
            Show All
          </div>
          <div
            class="filter-option option2"
            id="2"
            onclick="selectOption('option2'); undoData(); displayFavData();"
          >
            Show Fav Only
          </div>
          <div
            class="filter-option option3"
            id="3"
            onclick="selectOption('option3'); undoData(); displaySkipData();"
          >
            Show Skip Only
          </div>
          
        </div>
      </div>
    </div> -->

  <table id="dataTable" style="max-width: 90%; margin: auto; margin-top: 80px">
    <thead>
      <tr>
        <th style="width: fit-content; text-align: center">ID</th>
        <th style="width: max-content; text-align: center">Value</th>
        <th style="width: fit-content; text-align: center">Fav</th>
        <th style="width: fit-content; text-align: center">Skip</th>
        <th style="width: fit-content; text-align: center">Delete</th>
      </tr>
    </thead>
    <tbody>
      <!-- Data will be populated here -->
    </tbody>
  </table>

  <script>
    let isFilterSheetOpen = false;

       // Function to toggle the filter sheet and change the icon
    function toggleFilterSheet() {
      const sheet = document.getElementById("filterSheet");
      const icon = document.getElementById("toggleIcon");

      if (isFilterSheetOpen) {
        sheet.style.display = "none";
        icon.textContent = "☰"; // Change to hamburger icon
      } else {
        sheet.style.display = "block";
        icon.textContent = "✕"; // Change to cross icon
      }

      isFilterSheetOpen = !isFilterSheetOpen;
    }

    // Function to select an option and change background color
    function selectOption(option) {
      // Reset background color for all options
      const options = document.querySelectorAll(".filter-option");
      options.forEach((opt) => {
        opt.classList.remove("selected");
      });

      // Set background color for the selected option
      const selectedOption = document.querySelector(`.${option}`);
      selectedOption.classList.add("selected");

      // Close the filter sheet
      const filterSheet = document.getElementById("filterSheet");
      filterSheet.style.display = "none";

      // Change the icon back to the hamburger icon
      const icon = document.getElementById("toggleIcon");
      icon.textContent = "☰";

      isFilterSheetOpen = false;

      // Add logic here to handle the selected option
      console.log("Selected Option:", option);
    }


    // // Add a click event listener to the window
    // window.addEventListener("click", function (event) {
    //   const filterSheet = document.getElementById("filterSheet");
    //   const toggleIcon = document.getElementById("toggleIcon");

    //   // Check if the click target is outside the filter-sheet and toggle icon
    //   if (
    //     !filterSheet.contains(event.target) &&
    //     !toggleIcon.contains(event.target)
    //   ) {
    //     filterSheet.style.display = "none"; // Hide the filter-sheet
    //     toggleIcon.textContent = "☰";
    //     isFilterSheetOpen = false;
    //   }
    // });
  </script>


  <script src="./src/manageRecord.js"></script>
  <script src="./src/displayToast.js"></script>
</body>

</html>